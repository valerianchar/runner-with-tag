name: PHP Web CI

on:
  push:
    tags:
      - '*'

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2
    - name: Login to Docker Hub 
      uses: docker/login-action@v3 
      with:
          username: valerian.charrier@gmail.com
          password: 8v42O@576

    - name: Ping Command
      run: docker exec my-ping-container ping localhost -c 4 

    - name: Stop and Remove Containers
      run: docker stop my-ping-container && docker rm my-ping-container

    - name: Remove Docker Image
      run: docker rmi my-ping-app